# CLAUDE.md

このファイルは Claude Code (claude.ai/code) がこのリポジトリのコードで作業する際のガイダンスを提供します。

## プロジェクト概要

TODOLIST は macOS 用の Electron ベースの TODO アプリケーションで、macOS のリマインダーアプリのようなローカルでシンプルなタスク管理ツールを提供することを目的としています。

## Development Commands

```bash
# Install dependencies
npm install

# Start development mode
npm run dev

# Start production mode
npm start

# Build for macOS
npm run build-mac

# Run unit tests
npm test

# Run tests in watch mode
npm run test:watch

# Generate app icons from SVG
npm run build-icons
```

## プロジェクト構造

- `main.js` - ウィンドウ管理とアプリのライフサイクルを処理する Electron メインプロセス
- `index.html` - 分割ペインレイアウト（サイドバー + メインコンテンツ）のメインアプリケーション UI
- `styles.css` - ネイティブな見た目と感触を持つ macOS スタイルの CSS
- `renderer.js` - TodoApp クラスを初期化するエントリーポイント
- `src/TodoApp.js` - コアアプリケーションロジック（テスト可能、DOM から分離）
- `tests/` - Electron とファイルシステムのモックによる Jest ユニットテスト
- `package.json` - Electron の設定とビルド設定

## アーキテクチャ

### データ管理

- アプリデータディレクトリ内のローカル JSON ファイルストレージ（`tododata.json`）
- すべての操作におけるリアルタイム自動保存
- シンプルなデータ構造：外部キー関係を持つ lists と todos の配列

### UI コンポーネント

- **左サイドバー**: リスト管理、「すべて」デフォルトリスト
- **右パネル**: 完了チェックボックスと削除アクションを持つ TODO アイテム
- **モーダル**: リスト作成/編集ダイアログ
- **フォーム**: 下部のインライン TODO 追加

## 機能要件

### 主要機能（フェーズ 1 MVP）

- 複数リストの作成/削除（デフォルト「すべて」リストを除く）
- TODO 追加/完了/削除機能
- インライン編集: TODO テキストやリスト名のダブルクリックで編集
- マウスフォーカス選択: マウスオーバーでTODOアイテムを自動選択
- ドラッグ&ドロップによる並び替え機能
- 複数選択とキーボードショートカット対応
- 外部アプリケーションからの貼り付け機能（Cmd+V）
- 永続的な幅設定のリサイズ可能サイドバー
- 永続的なローカルストレージ
- サイドバーバイブランシーによる macOS ネイティブスタイリング

### 必須機能

1. **リスト管理**

   - 複数のリスト作成・編集・削除
   - リスト名の変更
   - リスト間の切り替え

2. **TODO 管理**

   - TODO 項目の追加・編集・削除
   - TODO 項目の並び順の保持
   - 完了/未完了の切り替え
   - 期限設定機能

3. **リマインド機能**

   - 期限に基づく通知
   - 通知のタイミング設定

4. **エクスポート機能**
   - テキスト形式でのデータエクスポート
   - ユーザー指定の保存場所への出力

### 任意機能

- 検索機能（上部検索バー）
- 今日/期限設定済み等のスマートリスト
- 完了済みタスクの表示切り替え

## 技術的注意事項

- ファイルシステムアクセスのため`nodeIntegration: true`を使用
- ネイティブ macOS の感触のため`hiddenInset`タイトルバーと`sidebar`バイブランシーでウィンドウを設定
- データは自動的に Electron の`userData`ディレクトリに保存
- カスタムリストのコンテキストメニューで削除が可能（右クリック）
- キーボードショートカット: Enter で保存、Escape でフォームキャンセル

## テスト

- すべてのコア機能をカバーする Jest によるユニットテスト
- 分離されたテストのための Electron とファイルシステム依存関係のモック
- 初期化、データ永続化、リスト/TODO 管理をカバーする 25 のテストケース
- 完全なテストスイートには`npm test`、開発用には`npm run test:watch`を実行

## 要件リファレンス

元の要件は参照用としてコードベース内のコメントで日本語で保存されています。主なポイント：

- フェーズ 1（MVP）: 基本的なリスト/TODO 管理、シンプルな UI、ローカルデータストレージ
- フェーズ 2: 期限/通知、エクスポート、検索
- フェーズ 3: UI/UX 改善、パフォーマンス最適化
